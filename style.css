/* General Setup */
body { margin: 0; font-family: 'Inter', sans-serif; background-color: #f4f7f9; }
#map { height: 100vh; width: 100%; position: absolute; z-index: 1; }

/* Sidebar Styling (High Z-Index) */
#sidebar { 
    position: absolute; top: 15px; right: 15px; z-index: 1000; 
    background: rgba(255, 255, 255, 0.95); padding: 20px; 
    border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); 
    width: 300px; max-height: 95vh; overflow-y: auto;
}

/* UI Elements */
h2 { font-size: 1.5rem; color: #2c3e50; margin-top: 0; }
p { font-size: 0.9rem; color: #7f8c8d; }
hr { border: 0; border-top: 1px solid #ecf0f1; margin: 15px 0; }

/* Tower/Link List Items */
.tower-info, .link-info { 
    margin-bottom: 8px; padding: 12px; border: 1px solid #bdc3c7; 
    border-radius: 8px; cursor: pointer; 
    transition: all 0.2s ease-in-out; background-color: #ffffff;
}
.tower-info:hover, .link-info:hover { 
    background-color: #ecf0f1; border-color: #3498db; 
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.2);
}
.tower-info strong, .link-info strong { color: #2980b9; }

/* Tower Marker on Map (Custom Leaflet DivIcon) */
.tower-marker { 
    background-color: #e74c3c; 
    border-radius: 50%; width: 14px; 
    height: 14px; border: 3px solid white; 
    cursor: pointer;
    box-shadow: 0 0 5px rgba(0,0,0,0.5);
    transition: border-color 0.2s;
}

/* Link Line Styles (Leaflet Polyline) */
.leaflet-link-line { 
    stroke: #3498db; 
    stroke-width: 3; 
    opacity: 0.7; 
    transition: all 0.2s;
}
.leaflet-link-line-selected { 
    stroke: #f39c12; 
    stroke-width: 5; 
    opacity: 1; 
}

/* Fresnel Zone SVG Overlay */
.fresnel-svg-overlay {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
    pointer-events: none; /* Crucial: allows map interaction underneath */
    z-index: 500; /* Above the map tiles but below markers */
}
#fresnel-ellipse { 
    fill: red; 
    opacity: 1; 
    pointer-events: none; 
    transition: all 0.3s ease;
}

/* Button Styling for Map Control */
.map-style-btn {
    flex-grow: 1;
    padding: 8px 10px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    background-color: #34495e;
    color: white;
    transition: background-color 0.2s;
}
.map-style-btn:hover {
    background-color: #2c3e50;
}
.flex { display: flex; }
.space-x-2 > *:not(:last-child) { margin-right: 0.5rem; }

/* Responsive adjustments for smaller screens */
@media (max-width: 768px) {
    #sidebar {
        width: 90%;
        right: 5%;
        left: 5%;
        max-height: 40vh; /* Don't cover the whole map */
        bottom: 15px;
        top: auto;
    }
}